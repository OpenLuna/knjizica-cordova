!function(){function e(n){var t=this;return e.is(t)?e.is(n)?t:t.opt(n):new e(n)}!function(n){!function(n){n.fns={is:function(e){return e instanceof Function}},n.bi={is:function(e){return e instanceof Boolean||"boolean"==typeof e}},n.num={is:function(e){return!n.list.is(e)&&(1/0===e||e-parseFloat(e)+1>=0)}},n.text={is:function(e){return"string"==typeof e}},n.text.ify=function(e){return n.text.is(e)?e:"undefined"!=typeof JSON?JSON.stringify(e):e&&e.toString?e.toString():e},n.text.random=function(e,n){var t="";for(e=e||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";e>0;)t+=n.charAt(Math.floor(Math.random()*n.length)),e--;return t},n.text.match=function(t,o){function i(e,n){for(var t,o=-1,i=0;t=n[i++];)if(!~(o=e.indexOf(t,o+1)))return!1;return!0}var r=!1;if(t=t||"",o=e.text.is(o)?{"=":o}:o||{},n.obj.has(o,"~")&&(t=t.toLowerCase()),n.obj.has(o,"="))return t===o["="];if(n.obj.has(o,"*")){if(t.slice(0,o["*"].length)!==o["*"])return!1;r=!0,t=t.slice(o["*"].length)}if(n.obj.has(o,"!")){if(t.slice(-o["!"].length)!==o["!"])return!1;r=!0}if(n.obj.has(o,"+")&&n.list.map(n.list.is(o["+"])?o["+"]:[o["+"]],function(e){return t.indexOf(e)>=0?void(r=!0):!0}))return!1;if(n.obj.has(o,"-")&&n.list.map(n.list.is(o["-"])?o["-"]:[o["-"]],function(e){return t.indexOf(e)<0?void(r=!0):!0}))return!1;if(n.obj.has(o,">")){if(!(t>o[">"]))return!1;r=!0}if(n.obj.has(o,"<")){if(!(t<o["<"]))return!1;r=!0}if(n.obj.has(o,"?")){if(!i(t,o["?"]))return!1;r=!0}return r},n.list={is:function(e){return e instanceof Array}},n.list.slit=Array.prototype.slice,n.list.sort=function(e){return function(n,t){return n&&t?(n=n[e],t=t[e],t>n?-1:n>t?1:0):0}},n.list.map=function(e,t,o){return n.obj.map(e,t,o)},n.list.index=1,n.obj={is:function(e){return e&&e.constructor?e.constructor===Object?!0:e.constructor.call&&!e.constructor.toString().match(/\[native\ code\]/):!1}},n.obj.put=function(e,n,t){return(e||{})[n]=t,e},n.obj.del=function(e,n){return e?(e[n]=null,delete e[n],!0):void 0},n.obj.ify=function(e){if(n.obj.is(e))return e;try{e=JSON.parse(e)}catch(t){e={}}return e},n.obj.copy=function(e){return e?JSON.parse(JSON.stringify(e)):e},n.obj.as=function(e,n,t){return e[n]=e[n]||(arguments.length>=3?t:{})},n.obj.has=function(e,n){return e&&Object.prototype.hasOwnProperty.call(e,n)},n.obj.empty=function(e,t){return e?!n.obj.map(e,function(e,o){return t&&(o===t||n.obj.is(t)&&n.obj.has(t,o))?void 0:o?!0:void 0}):!0},n.obj.map=function(e,t,o){var i,r,a,s,u,c,l=0,f=0,d=n.fns.is(t),h=function(e,n){return 2===arguments.length?(s=s||{},void(s[e]=n)):(s=s||[],void s.push(e))};if(Object.keys&&n.obj.is(e)&&(u=Object.keys(e),c=!0),n.list.is(e)||u){for(r=(u||e).length;r>l;l++)if(f=l+n.list.index,d){if(a=c?t.call(o||this,e[u[l]],u[l],h):t.call(o||this,e[l],f,h),a!==i)return a}else if(t===e[c?u[l]:l])return u?u[l]:f}else for(l in e)if(d){if(n.obj.has(e,l)&&(a=o?t.call(o,e[l],l,h):t(e[l],l,h),a!==i))return a}else if(t===e[l])return l;return d?s:n.list.index?0:-1},n.time={},n.time.is=function(e){return e?e instanceof Date:+(new Date).getTime()},n.time.now=function(e){return((e=e||n.time.is())>(n.time.now.last||-(1/0))?n.time.now.last=e:n.time.now(e+1))+(n.time.now.drift||0)}}(n),function(e){function n(){}n.create=function(){var n=function(e){return n.event.e=e,n.event.s[e]=n.event.s[e]||[],n};return n.emit=function(t){var o=n.event.e,i=n.event.s[o],r=arguments,a=r.length;e.list.map(i,function(e,n){return e.fn?1===a?void e.fn(t):void e.fn.apply(e,r):void i.splice(n-1,0)}),i.length||delete n.event.s[o]},n.event=function(e,o){var i=n.event.s[n.event.e];if(i){var r={fn:e,i:o||0,off:function(){return!(r.fn=!1)}};return i.push(r),o?i.sort(t):o,r}},n.event.s={},n};var t=e.list.sort("i");e.on=n.create(),e.on.create=n.create}(n),function(e){var n=function(e,t){n.waiting.push({when:e,event:t||function(){}}),n.soonest<e||n.set(e)};n.waiting=[],n.soonest=1/0,n.sort=e.list.sort("when"),n.set=function(t){if(!(1/0<=(n.soonest=t))){var o=e.time.now();t=o>=t?0:t-o,clearTimeout(n.id),n.id=setTimeout(n.check,t)}},n.check=function(){var t=e.time.now(),o=1/0;n.waiting.sort(n.sort),n.waiting=e.list.map(n.waiting,function(n,i,r){n&&(n.when<=t?e.fns.is(n.event)&&setTimeout(function(){n.event()},0):(o=o<n.when?o:n.when,r(n)))})||[],n.set(o)},e.schedule=n}(n)}(e),function(e){e.version=.3,e._={meta:"_",soul:"#",field:".",state:">","#":"soul",".":"field","=":"value",">":"state"},e.is=function(n){return n instanceof e},e.is.val=function(n){return null===n?!0:n===1/0?!1:e.bi.is(n)||e.num.is(n)||e.text.is(n)?!0:e.is.rel(n)||!1},e.is.rel=function(n){if(e.obj.is(n)){var t;if(e.obj.map(n,function(n,o){return t?t=!1:o==e._.soul&&e.text.is(n)?void(t=n):t=!1}),t)return t}return!1},e.is.rel.ify=function(n){var t={};return e.obj.put(t,e._.soul,n),t},e.is.lex=function(n){var t=!0;return e.obj.is(n)?(e.obj.map(n,function(n,o){return e.obj.has(e._,o)&&(e.text.is(n)||e.obj.is(n))?void 0:t=!1}),t):!1},e.is.node=function(n,t,o){var i;return e.obj.is(n)&&(i=e.is.node.soul(n))?!e.obj.map(n,function(i,r){return r!=e._.meta?e.is.val(i)?void(t&&t.call(o,i,r,n)):!0:void 0}):!1},e.is.node.ify=function(n,t,o){return o=e.bi.is(o)?{force:o}:o||{},n=e.is.node.soul.ify(n,t,o.force),e.obj.map(n,function(t,i){e._.meta!==i&&e.is.node.state.ify([n],i,t,o.state=o.state||e.time.now())}),n},e.is.node.soul=function(n,t){return n&&n._&&n._[t||e._.soul]||!1},e.is.node.soul.ify=function(n,t,o){return n=n||{},n._=n._||{},n._[e._.soul]=o?t:n._[e._.soul]||t||e.text.random(),n},e.is.node.state=function(n,t){return t&&n&&n._&&n._[e._.state]&&e.num.is(n._[e._.state][t])?n._[e._.state][t]:!1},e.is.node.state.ify=function(n,t,o,i){n=e.list.is(n)?n:[n];var n=n.reverse(),r=n[0];e.list.map(n,function(n,a){n=n||{},e.is.val(o)&&(n[t]=o),n._=n._||{},n=n._[e._.state]=n._[e._.state]||{},(a=r._[e._.state][t])&&(n[t]=a),e.num.is(i)&&(n[t]=i)})},e.is.graph=function(n,t,o,i){var r=!1;return e.obj.is(n)?!e.obj.map(n,function(n,a){return n&&a===e.is.node.soul(n)&&e.is.node(n,o)?((t||function(){}).call(i,n,a,function(t){t&&e.is.node(n,t,i)}),void(r=!0)):!0})&&r:!1},e.is.graph.ify=function(n){var t;return(t=e.is.node.soul(n))?e.obj.put({},t,n):void 0},e.HAM=function(e,n,t,o,i){if(n>e)return{defer:!0};if(t>n)return{historical:!0};if(n>t)return{converge:!0,incoming:!0};if(n===t){if(o===i)return{state:!0};if(String(o)<String(i))return{converge:!0,current:!0};if(String(i)<String(o))return{converge:!0,incoming:!0}}return{err:"you have not properly handled recursion through your data or filtered it as JSON"}},e.union=function(n,t,o,i){function r(t){e.on("operating").emit(n,t)}var i=i||e.obj.is(o)?o:{},a={graph:n.__.graph,count:0};return a.cb=function(){o=e.fns.is(o)?o()&&null:null},a.graph||(a.err={err:e.log("No graph!")}),t||(a.err={err:e.log("No data to merge!")}),(a.soul=e.is.node.soul(t))&&(t=e.is.graph.ify(t)),!e.is.graph(t,null,function(n,t,o){return e.num.is(e.is.node.state(o,t))?void 0:a.err={err:e.log("No state on '"+t+"'!")}})||a.err?(a.err=a.err||{err:e.log("Invalid graph!",t)},a):(function(t,o){var o=e.obj.map(o,function(e,n,t){t(e)}).sort(function(n,o){var i=e.is.node.soul(n);return t[i]?1:0});a.count+=1,a.err=e.list.map(o,function(o,s){if(s=e.is.node.soul(o),!s)return{err:e.log("Soul missing or mismatching!")};a.count+=1;var u=t[s];u||(t[s]=u=e.is.node.ify({},s)),e.union.HAM(u,o,function(t,i,r,a){e.on("historical").emit(n,{soul:s,field:i,value:r,state:a,change:o}),n.__.on("historical").emit({soul:s,field:i,change:o})},function(n,t,i,a){if(n){var u=e.is.node.soul.ify({},s);t&&e.is.node.state.ify([n,u,o],t,i),r({soul:s,field:t,value:i,state:a,change:u})}},function(e,n,t){})(function(){r({soul:s,change:o}),i.soul&&i.soul(s),(a.count-=1)||a.cb()})}),a.count-=1}(a.graph,t),a.count||a.cb(),a)},e.union.ify=function(n,t,o,i){if(n&&(n=n.__&&n.__.graph?n.__.graph:n),e.text.is(t)){if(!n||!n[t])return e.is.node.ify({},t);t=n[t]}var r=e.is.node.soul.ify({},e.is.node.soul(t)),t=e.is.graph.ify(t)||t;return e.is.graph(t,null,function(o,i){function a(n,t,o){e.is.node.state.ify(n,t,o)}var s;e.is.rel(o)&&(s=n?n[i]||t[i]:t[i]),e.union.HAM(r,s,function(){},function(e,n,t){a([r,s],n,t)},function(){})(function(e){e&&a([r],i,o)})})?r:void 0},e.union.HAM=function(t,o,i,r,a){return a.max=-(1/0),r.end=!0,o=o||{},t=t||{},e.obj.map(o._,function(n,o){e._.state!==o&&e._.soul!==o&&(t._[o]=n)}),e.is.node(o,function s(u,c){r.end=!1;var l,f={incoming:{},current:{}};return f.drift=e.time.now(),f.incoming.value=e.is.rel(u)||u,f.current.value=e.is.rel(t[c])||t[c],f.incoming.state=e.num.is(f.tmp=((o._||{})[e._.state]||{})[c])?f.tmp:-(1/0),f.current.state=e.num.is(f.tmp=((t._||{})[e._.state]||{})[c])?f.tmp:-(1/0),a.max=f.incoming.state>a.max?f.incoming.state:a.max,l=e.HAM(f.drift,f.incoming.state,f.current.state,f.incoming.value,f.current.value),l.err?void n.console.log(".!HYPOTHETICAL AMNESIA MACHINE ERR!.",l.err):l.state||l.historical||l.current?void i.call(l,t,c,u,f.incoming.state):l.incoming?void r.call(l,t,c,u,f.incoming.state):void(l.defer&&(a.wait=!0,a.call(l,t,c,u,f.incoming.state),e.schedule(f.incoming.state,function(){s(u,c),f.incoming.state===a.max&&(a.last||function(){})()})))})?(r.end&&r.call({},t),function(e){a.last=e||function(){},a.wait||a.last()}):function(e){e&&e({err:"Not a node!"})}},e.on.at=function(n){var t=function(e){return t.e=e,t};return t.emit=function(o){return o.soul&&(o.hash=e.on.at.hash(o),e.obj.as(t.mem,t.e)[o.hash]=o),t.all.cb&&t.all.cb(o,t.e),n(t.e).emit(o),{chain:function(e){return e&&e._&&e._.at?e._.at(t.e).emit(o):void 0}}},t.only=function(e){return t.only.cb?void 0:t.event(t.only.cb=e)},t.all=function(n){t.all.cb=n,e.obj.map(t.mem,function(t,o){e.obj.map(t,function(e,t){n(e,o)})})},t.event=function(o,i){return i=n(t.e).event(o,i),e.obj.map(t.mem[t.e],function(e){i.stat={first:!0},o.call(i,e)}),i.stat={},i},t.map=function(e,n){return t.event(e,n)},t.mem={},t},e.on.at.hash=function(e){return e.at&&e.at.soul?e.at.soul+(e.at.field||""):e.soul+(e.field||"")},e.on.at.copy=function(n){return e.obj.del(n,"hash"),e.obj.map(n,function(e,n,t){t(n,e)})}}(e),function(e){e.chain=e.prototype,e.chain.opt=function(n,t){n=n||{};var o=this,i=o.__&&o.__.gun?o.__.gun:(o._=o.__={gun:o}).gun.chain();return i.__.by=i.__.by||function(e){return o.__.by[e]=o.__.by[e]||{}},i.__.graph=i.__.graph||{},i.__.opt=i.__.opt||{},i.__.opt.wire=i.__.opt.wire||{},e.text.is(n)&&(n={peers:n}),e.list.is(n)&&(n={peers:n}),e.text.is(n.peers)&&(n.peers=[n.peers]),e.list.is(n.peers)&&(n.peers=e.obj.map(n.peers,function(e,n,t){t(e,{})})),i.__.opt.peers=n.peers||o.__.opt.peers||{},e.obj.map(n.wire,function(n,t){e.fns.is(n)&&(i.__.opt.wire[t]=n)}),e.obj.map(["key","on","path","map","not","init"],function(e){n[e]&&(i.__.opt[e]=n[e]||i.__.opt[e])}),t||e.on("opt").emit(i,n),o},e.chain.chain=function(n){var t=this,o=t.back?e(t):t;return o.back=o.back||t,o.__=o.__||t.__,o._=o._||{},o._.on=o._.on||e.on.create(),o._.at=o._.at||e.on.at(o._.on),o},e.chain.put=function(n,t,o){function i(n){function c(t,o,i){var a;if(t&&(a=t.at)&&t.at.node){if(a.node._||(a.node._={}),a.node._[e._.state]||(a.node._[e._.state]={}),!e.is.node.soul(a.node))if(d.obj===a.obj)e.obj.as(t.graph,a.soul=e.obj.as(a.node._,e._.soul,e.is.node.soul(a.obj)||d.soul),a.node),o(a,a.soul);else{var s=function(n,i){s.opt&&s.opt.on&&s.opt.on.off&&s.opt.on.off(),s.opt.done||(s.opt.done=!0,n&&(t.err=n),a.soul=e.is.node.soul(i)||e.is.node.soul(a.obj)||e.is.node.soul(a.node)||e.text.random(),e.obj.as(t.graph,e.obj.as(a.node._,e._.soul,a.soul),a.node),o(a,a.soul))};s.opt={put:!0},d.not?s():(n.field||n.at?r.back:r).path(a.path||[],s,s.opt)}a.field&&(a.node._[e._.state][a.field]=u)}}function l(i,s){if(d.ify=s,e.on("put").emit(a,n,d,o,t,f),i||s.err)return t.call(a,i||s.err),a._.at("err").emit(i||s.err);if(i=e.union(a,s.graph,{end:!1,soul:function(n){a.__.by(n).end||e.union(a,e.is.node.soul.ify({},n))}}).err)return t.call(a,i),a._.at("err").emit(i);if(e.fns.is(l.wire=a.__.opt.wire.put)){var u=function(n,o,i){return n?(e.log(n.err||n),t.call(a,n),a._.at("err").emit(n)):t.call(a,n,o)};l.wire(s.graph,u,o)}else e.log.count("no-wire-put")||e.log("Warning! You have no persistence layer to save to!"),t.call(a,null);return d.field?r.back.path(d.field,null,{chain:o.chain||a}):d.not?r.__.gun.get(d.soul,null,{chain:o.chain||a}):void a.get(d.soul,null,{chain:o.chain||a,at:r._.at})}var f=s.val,d={obj:f};if(d.soul=n.field?n.soul:n.at&&n.at.soul||n.soul,d.field=n.field?n.field:n.at&&n.at.field||n.field,e.is(f))return d.field?f.val(function(o){var r=e.is.node.soul(o);return r?(s.val=e.is.rel.ify(r),void i(n)):(t.call(a,{err:d.err=e.log('Only a node can be linked! Not "'+o+'"!')}),a._.at("err").emit(d.err))}):(t.call(a,{err:d.err=e.log("No field to link node to!")}),a._.at("err").emit(d.err));if(!t.hash[n.hash=n.hash||e.on.at.hash(n)]){if(t.hash[n.hash]=!0,d.by=a.__.by(d.soul),d.not=n.not||n.at&&n.at.not,e.obj.del(n,"not"),e.obj.del(n.at||n,"not"),d.field)e.obj.as(d.obj={},d.field,f);else if(!e.obj.is(f))return t.call(a,d.err={err:e.log("No node exists to put "+typeof f+' "'+f+'" in!')}),a._.at("err").emit(d.err);e.ify(d.obj,c,{pure:!0})(l)}}o=o||{},t=t||function(){},t.hash={};var r=this,a=r.chain(),s={val:n},u=e.time.now();if(r===r.back)i({soul:e.is.node.soul(n)||e.text.random(),not:!0});else{r._.at("soul").map(i);var c=function(t){return t.back===t||t._.not?void 0:(t._.at("null").event(function(i){return o.init||t.__.opt.init?e.log("Warning! You have no context to `.put`",n,"!"):void t.init()},-999),c(t.back))};o.init||r.__.opt.init||c(r)}return a.back=r.back,a},e.chain.get=function(){return e.on("operating").event(function(e,n){e.__.by(n.soul).node||(e.__.by(n.soul).node=e.__.graph[n.soul]),n.field||e.__.on(n.soul).emit(n)}),e.on("get").event(function(n,t,o,i,r){if(!o.halt){if(t.change=t.change||n.__.by(t.soul).node,i.raw)return r.call(i.on,t);o.cb.no||r.call(o.by.chain,null,e.obj.copy(o.node||n.__.by(t.soul).node)),n._.at("soul").emit(t).chain(i.chain)}},0),e.on("get").event(function(e,n,t){return t.halt?void(t.halt=!1):void 0},1/0),function(n,t,o){function i(n){var t=n[e._.soul],o=u.__.by(t).node||u.__.graph[t];if(c.force)c.force=!1;else if(o)return!1;return a(n,r,c.opt),!0}function r(n,t,o){return e.on("wire.get").emit(c.by.chain,c,n,t,o),n?(e.log(n.err||n),c.cb.call(c.by.chain,n),c.by.chain._.at("err").emit({soul:c.soul,err:n.err||n}).chain(c.opt.chain)):t?e.obj.empty(t)?void 0:(n=e.union(c.by.chain,t).err)?(c.cb.call(c.by.chain,n),c.by.chain._.at("err").emit({soul:e.is.node.soul(t)||c.soul,err:n.err||n}).chain(c.opt.chain)):void 0:(c.cb.call(c.by.chain,null),c.by.chain._.at("null").emit({soul:c.soul,not:!0}).chain(c.opt.chain))}function a(n,t,o){return e.on("get.wire").emit(c.by.chain,c,n,t,o),e.fns.is(u.__.opt.wire.get)?u.__.opt.wire.get(n,t,o):(e.log.count("no-wire-get")||e.log("Warning! You have no persistence layer to get from!"),void t(null))}function s(n){(s.ran=!0)&&(c.opt.on=this),i(c.lex)||e.on("get").emit(c.by.chain,n,c,c.opt,c.cb,c.lex)}var u=this,c={opt:o||{},cb:t||function(){},lex:e.text.is(n)||e.num.is(n)?e.is.rel.ify(n):n};return c.force=c.opt.force,t!==c.cb&&(c.cb.no=!0),e.obj.is(c.lex)?(c.soul=c.lex[e._.soul])?(c.by=u.__.by(c.soul),c.by.chain=c.by.chain||u.chain(),c.opt.on=(c.opt.at||u.__.at)(c.soul).event(s),c.opt.ran||s.ran||s.call(c.opt.on,{soul:c.soul}),c.by.chain):(c.cb.call(u=this.chain(),{err:e.log("No soul to get!")}),u):(c.cb.call(u=u.chain(),{err:e.log("Invalid get request!",n)}),u)}}(),e.chain.key=function(){return e.on("put").event(function(n,t,o,i,r){i.key||e.is.graph(o.ify.graph,function(t,i){var r={node:n.__.graph[i]};e.is.node.soul(r.node,"key")&&(n.__.by(i).end||(n.__.by(i).end=1),e.is.node(r.node,function(n,r){n=o.ify.graph[r]=o.ify.graph[r]||e.is.node.soul.ify({},r),e.is.node(t,function(o,i){e.is.node.state.ify([n,t],i,o)}),e.obj.del(o.ify.graph,i)}))})}),e.on("get").event(function(n,t,o,i,r){function a(e,t){n.__.gun.get(e,r,{key:o,chain:i.chain||n,force:i.force})}if(!o.halt){if(i.key&&i.key.soul)return t.soul=i.key.soul,n.__.by(i.key.soul).node=e.union.ify(n,i.key.soul),n.__.by(i.key.soul).node._.key="pseudo",void(t.change=e.is.node.soul.ify(e.obj.copy(t.change||n.__.by(t.soul).node),t.soul,!0));if(1===e.is.node.soul(n.__.graph[t.soul],"key")){var s=t.change||n.__.graph[t.soul];o.halt=!0,e.is.node(s,a)}}},-999),function(n,t,o){function i(i){var a={node:r.__.graph[i.soul]};i.soul!==n&&i.key!==n&&(t.hash[i.hash=i.hash||e.on.at.hash(i)]||(t.hash[i.hash]=!0,a.obj=1===e.is.node.soul(a.node,"key")?e.obj.copy(a.node):e.obj.put({},i.soul,e.is.rel.ify(i.soul)),e.obj.as((a.put=e.is.node.ify(a.obj,n,!0))._,"key",1),r.__.gun.put(a.put,function(e,n){t.call(this,e,n)},{chain:o.chain,key:!0,init:!0})))}var r=this;return o=e.text.is(o)?{soul:o}:o||{},t=t||function(){},t.hash={},e.text.is(n)&&n?o.soul?(i({soul:o.soul}),r):(r===r.back?t.call(r,{err:e.log("You have no context to `.key`",n,"!")}):r._.at("soul").map(i),r):(t.call(r,{err:e.log("No key!")}),r)}}(),e.chain.on=function(n,t){function o(o){t.on=t.on||this;var r={by:i.__.by(o.soul)},a=r.by.node;return t.on.stat&&t.on.stat.first&&((o=e.on.at.copy(o)).change=r.by.node),t.raw?n.call(t.on,o):(t.once&&this.off(),t.change&&(a=o.change),void(!t.empty&&e.obj.empty(a,e._.meta)||n.call(r.by.chain||i,e.obj.copy(o.field?a[o.field]:a),o.field||o.at&&o.at.field)))}var i=this;return t=e.obj.is(t)?t:{change:t},n=n||function(){},t.on=i._.at("soul").map(o),i===i.back&&e.log("You have no context to `.on`!"),i},e.chain.path=function(){return e.on("get").event(function(n,t,o,i,r,a){if(!o.halt){i.path&&(t.at=i.path);var s={soul:a[e._.soul],field:a[e._.field]};if(s.change=t.change||n.__.by(t.soul).node,s.field){if(!e.obj.has(s.change,s.field))return;o.node=e.is.node.soul.ify({},t.soul),e.is.node.state.ify([o.node,s.change],s.field,s.change[s.field]),t.change=o.node,t.field=s.field}}},-99),e.on("get").event(function(n,t,o,i,r,a){if(!o.halt){var s={};s.change=t.change||n.__.by(t.soul).node,i.put||e.is.node(s.change,function(o,r){var a=e.on.at.copy(t);a.field=r,a.value=o,e.obj.del(a,"at"),a.change=a.change||s.change,(o=e.is.rel(a.value))&&(a={soul:o,at:a}),n._.at("path:"+r).emit(a).chain(i.chain)}),o.end||(o.end=n._.at("end").emit(t).chain(i.chain))}},99),function(n,t,o){o=o||{},t=t||function(){var e=function(){};return e.no=!0,e}(),t.hash={};var i,r=this,a=r.chain();return e.list.is(n)?r===r.back?(t.call(a,o.put?null:{err:e.log("You have no context to `.path`",n,"!")}),a):(r._.at("path:"+n[0]).event(function(i){if(o.done)return void this.off();var s={soul:i.soul,field:i.field,by:r.__.by(i.soul)},u=n[0],c=e.obj.as(t.hash,i.hash,{off:function(){}});if(i.soul!==c.soul){if(c.off(),s.rel=e.is.rel(i.value)||e.is.rel(i.at&&i.at.value)){if(o.put&&1===n.length)return t.call(s.by.chain||a,null,e.is.node.soul.ify({},s.rel));var l=function(e,o){(e||1===n.length)&&t.call(this,e,o,u)};return s.opt={chain:o.chain||a,put:o.put,path:{soul:i.at&&i.at.soul||i.soul,field:u}},r.__.gun.get(s.rel||i.soul,t.no?null:l,s.opt),void((o.on=t.hash[i.hash]=c=s.opt.on).soul=i.soul)}1===n.length&&t.call(s.by.chain||a,null,i.value,s.field),a._.at("soul").emit(i).chain(o.chain)}}),r._.at("null").only(function(t){t.field&&(t.not&&(r.put({},null,{init:!0}),o.init||r.__.opt.init)||((t=e.on.at.copy(t)).field=n[0],t.not=!0,a._.at("null").emit(t).chain(o.chain)))}),r._.at("end").event(function(i){if(this.off(),!i.at||i.at.field!==n[0]){var s={by:r.__.by(i.soul)};e.obj.has(s.by.node,n[0])||((i=e.on.at.copy(i)).field=n[0],i.not=!0,t.call(s.by.chain||a,null),a._.at("null").emit(i).chain(o.chain))}}),n.length>1&&((i=a.path(n.slice(1),t,o)).back=r),i||a):e.text.is(n)?this.path(n.split("."),t,o):e.num.is(n)?this.path(n+"",t,o):(t.call(a,{err:e.log("Invalid path '"+n+"'!")}),a)}}(),e.chain.map=function(n,t){function o(e,t,o){e||t===a||n.call(this,t,o)}function i(e,t){n.hash[this.soul+t]=n.hash[this.soul+t]||this.gun.path(t,o,{chain:u,via:"map"})}function r(n){var t=s.__.by(n.soul).chain||s;e.is.node(n.change,i,{gun:t,soul:n.soul})}var a,s=this,u=s.chain();return n=n||function(){},n.hash={},t=e.bi.is(t)?{change:t}:t||{},t.change=e.bi.is(t.change)?t.change:!0,s.on(r,{raw:!0,change:!0}),s===s.back&&e.log("You have no context to `.map`!"),u},e.chain.val=function(){return e.on("get.wire").event(function(e,n){if(n.soul){var t;(t=e.__.by(n.soul)).end=t.end||-1}},-999),e.on("wire.get").event(function(n,t,o,i){if(!o&&t.soul&&(!i||e.obj.empty(i,e._.meta))){var r=n.__.by(t.soul);r.end=!r.end||r.end<0?1:r.end+1}},-999),function(t,o){function i(n){var i={by:r.__.by(n.soul),at:n.at||n},a=i.by.node,s=i.at.field,u=e.on.at.hash({soul:i.at.key||i.at.soul,field:s});if(!t.hash[u]){if(n.field&&e.obj.has(a,n.field))return t.hash[u]=!0,t.call(i.by.chain||r,e.obj.copy(a[n.field]),n.field);if((o.empty||!e.obj.empty(a,e._.meta))&&!(i.by.end<0))return t.hash[u]=!0,t.call(i.by.chain||r,e.obj.copy(a),s)}}var r=this,a=e.list.slit.call(arguments);return t=e.fns.is(t)?t:function(e,t){n.console.log.apply(n.console,a.concat([t&&(t+=":"),e]))},t.hash={},o=o||{},r.on(i,{raw:!0}),r===r.back&&e.log("You have no context to `.val`!"),r}}(),e.chain.not=function(n,t){function o(o,a){if(o.field){if(e.obj.has(i.__.by(o.soul).node,o.field))return e.obj.del(o,"not"),r._.at(a).emit(o)}else if(o.soul&&i.__.by(o.soul).node)return e.obj.del(o,"not"),r._.at(a).emit(o);if(o.not){var s=function(n){return++s.c?e.log("Warning! Multiple `not` resumes!"):void n._.at.all(function(e,n){r._.at(n).emit(e)})};s.c=-1,s.chain=i.chain(),s.next=n.call(s.chain,t.raw?o:o.field||o.soul||o.not,s),s.soul=e.text.random(),e.is(s.next)&&s(s.next),s.chain._.at("soul").emit({soul:s.soul,field:o.field,not:!0,via:"not"})}}var i=this,r=i.chain();return n=n||function(){},t=t||{},i._.at.all(o),i===i.back&&e.log("You have no context to `.not`!"),r._.not=!0,r},e.chain.set=function(n,t,o){var i=this,r={};return e.is(n)?((r.chain=n.chain()).back=i,r.chain._=n._,n.val(function(n){if(!r.done){r.done=!0;var a={},s=e.is.node.soul(n);return s?void i.put(e.obj.put(a,s,e.is.rel.ify(s)),t,o):t.call(i,{err:e.log('Only a node can be linked! Not "'+n+'"!')})}}),r.chain):(t.call(i,{err:e.log("Set only supports node references currently!")}),i)},e.chain.init=function(n,t){var o=this;return o._.at("null").event(function(n){if(n.not){var t={by:o.__.by(n.soul)};if(n.field){if(e.obj.has(t.by.node,n.field))return;return void o._.at("soul").emit({soul:n.soul,field:n.field,not:!0})}if(n.soul){if(t.by.node)return;var i=e.text.random();o.__.gun.put(e.is.node.soul.ify({},i),null,{init:!0}),o.__.gun.key(n.soul,null,i)}}},{raw:!0}),o}}(e),function(e){function n(n,r,a){a=a||{},r=r||function(n,t){t(n.at,e.is.node.soul(n.at.obj)||e.is.node.soul(n.at.node)||e.text.random())};var s=function(e){u.end=e||function(){},o(u)},u={at:{path:[],obj:n},root:{},graph:{},queue:[],seen:[],opt:a,loop:!0};if(!n)return u.err={err:e.log("Serializer does not have correct parameters.")},s;for(u.opt.start&&e.is.node.soul.ify(u.root,u.opt.start),u.at.node=u.root;u.loop&&!u.err;)i(u,u.at),t(u,r),u.queue.length?u.at=u.queue.shift():u.loop=!1;return s}function t(n,r){var a,s,u=function(t,i){t.soul=t.soul||i||e.is.node.soul(t.obj)||e.is.node.soul(t.node),n.opt.pure||(n.graph[t.soul]=e.is.node.soul.ify(t.node,t.soul),n.at.field&&e.is.node.state.ify([t.node],t.field,a,n.opt.state)),e.list.map(t.back,function(n){n[e._.soul]=t.soul}),o(n)};e.obj.map(n.at.obj,function(o,a){if(n.at.val=o,n.at.field=a,s=r(n,u,t)||!0,a===e._.meta)return void(n.at.node[a]=e.obj.copy(o));if(-1!=String(a).indexOf("."))return n.err={err:e.log("Invalid field name on '"+n.at.path.join(".")+"'!")};if(e.is.val(o))n.at.node[a]=e.obj.copy(o);else{var c,l={obj:o,node:{},back:[],path:[a]},f={};if(l.path=(n.at.path||[]).concat(l.path||[]),!e.obj.is(o))return n.err={err:e.log("Invalid value at '"+l.path.join(".")+"'!")};(c=i(n,l))?(f[e._.soul]=e.is.node.soul(c.node)||null,(c.back=c.back||[]).push(n.at.node[a]=f)):(n.queue.push(l),f[e._.soul]=null,l.back.push(n.at.node[a]=f))}}),s||r(n,u)}function o(n){return n.err||!e.list.map(n.seen,function(e){return e.soul?void 0:!0})&&!n.loop?(n.end(n.err,n),n.end=function(){}):void 0}function i(n,t){return e.list.map(n.seen,function(e){return t.obj===e.obj?e:void 0})||n.seen.push(t)&&!1}n.wire=function(t,o,i){return e.text.is(t)?n.wire.from(t,o,i):n.wire.to(t,o,i)},n.wire.to=function(n,t,o){var i,r;return n&&(i=e.is.node.soul(n))?(t=t||function(){},i=r="#'"+JSON.stringify(i)+"'",e.obj.map(n,function(o,a){if(e._.meta!==a){var s="",u=e.is.node.state(n,a);u&&(s+=".'"+JSON.stringify(a)+"'",s+="='"+JSON.stringify(o)+"'",s+=">'"+JSON.stringify(u)+"'",i+=s,s=r+s,t(null,s))}}),i):null},n.wire.from=function(e,n,t){if(!e)return null;for(var o=[],i=-1,r=0;(r=e.indexOf("'",i+1))>=0;)i===r||"\\"===e.charAt(r-1)||(o.push(e.slice(i+1,r)),i=r);return o},e.ify=n}(e);var n=this||{};n.window&&(window.Gun=e),"undefined"!=typeof module&&module.exports&&(module.exports=e),n.console=n.console||{log:function(e){return e}};var t={log:function(e){return n.console.log.apply(n.console,arguments),e},Log:e.log=function(t){return!e.log.squelch&&n.console.log.apply(n.console,arguments),t}};t.debug=function(t,o){return e.log.debug&&t===e.log.debug&&e.log.debug++&&n.console.log.apply(n.console,arguments),o},e.log.count=function(n){return e.log.count[n]=e.log.count[n]||0,e.log.count[n]++}}(),function(e){if(this.Gun){if(!window.JSON)throw new Error("Include JSON first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js");!function(e){function n(){}n.put=function(e,n){return t.setItem(e,Gun.text.ify(n))},n.get=function(e,n){return n(null,Gun.obj.ify(t.getItem(e)||null))},n.del=function(e){return t.removeItem(e)};var t=this.localStorage||{setItem:function(){},removeItem:function(){},getItem:function(){}};e.store=n}(e),Gun.on("opt").event(function(t,o){o=o||{};var i=t.tab=t.tab||{};i.store=i.store||e.store,i.request=i.request||n,i.request.s=i.request.s||{},i.headers=o.headers||{},i.headers["gun-sid"]=i.headers["gun-sid"]||Gun.text.random(),i.prefix=i.prefix||o.prefix||"gun/",i.get=i.get||function(e,n,o){if(e){var r=e[Gun._.soul];if(r){if(n=n||function(){},(o.headers=Gun.obj.copy(i.headers)).id=i.msg(),function(e,n){i.store.get(i.prefix+e,function(e,t){if(t){if(e)return n(e);n(e,n.node=t),n(e,Gun.is.node.soul.ify({},Gun.is.node.soul(t))),n(e,{})}})}(r,n),!(n.local=o.local)){i.request.s[o.headers.id]=i.error(n,"Error: Get failed!",function(e){setTimeout(function(){i.put(Gun.is.graph.ify(e.body),function(){},{local:!0,peers:{}})},1)}),Gun.obj.map(o.peers||t.__.opt.peers,function(t,r){i.request(r,e,i.request.s[o.headers.id],o),n.peers=!0});var a=t.__.graph[r];a&&i.put(Gun.is.graph.ify(a))}i.peers(n)}}},i.put=i.put||function(e,n,o){n=n||function(){},o=o||{},(o.headers=Gun.obj.copy(i.headers)).id=i.msg(),Gun.is.graph(e,function(e,n){t.__.graph[n]&&i.store.put(i.prefix+n,t.__.graph[n])}),(n.local=o.local)||(i.request.s[o.headers.id]=i.error(n,"Error: Put failed!"),Gun.obj.map(o.peers||t.__.opt.peers,function(t,r){i.request(r,e,i.request.s[o.headers.id],o),n.peers=!0})),i.peers(n)},i.error=function(e,n,t){return function(o,i){return i.body=i.body||i.chunk||i.end||i.write,o||!i||(o=i.body&&i.body.err)?e({err:Gun.log(o||n)}):(t&&t(i),void e(null,i.body))}},i.peers=function(e,n){return Gun.text.is(e)?((n={})[e]={},n):void(e&&!e.peers&&setTimeout(function(){e.local||Gun.log.count("no-peers")||Gun.log("Warning! You have no peers to connect to!"),e.graph||e.node||e(null)},1))},i.msg=i.msg||function(e){return e?(clearTimeout(i.msg.clear),i.msg.clear=setTimeout(function(){var e=Gun.time.is();Gun.obj.map(i.msg.debounce,function(n,t){3e5>e-n||Gun.obj.del(i.msg.debounce,t)})},500),(e=i.msg.debounce[e])?(i.msg.debounce[e]=Gun.time.is(),e):void 0):(i.msg.debounce[e=Gun.text.random(9)]=Gun.time.is(),e)},i.msg.debounce=i.msg.debounce||{},i.server=i.server||function(e,n){if(e&&n&&e.body&&e.headers&&e.headers.id){if(i.request.s[e.headers.rid])return i.request.s[e.headers.rid](null,e);if(!i.msg(e.headers.id)&&!e.headers.rid)return Gun.is.lex(e.body)?i.server.get(e,n):i.server.put(e,n)}},i.server.json="application/json",i.server.regex=t.__.opt.route=t.__.opt.route||o.route||/^\/gun/i,i.server.get=function(e,n){var o,r=e.body[Gun._.soul];if(o=t.__.graph[r]){var a={headers:{"Content-Type":i.server.json,rid:e.headers.id,id:i.msg()}};n({headers:a.headers,body:o})}},i.server.put=function(e,n){var o={headers:{"Content-Type":i.server.json,rid:e.headers.id,id:i.msg()}};return e.body?void(Gun.obj.is(e.body,function(e,n){return t.__.graph[n]?!0:void 0})&&(e.err=Gun.union(t,e.body,function(i,r){if(i)return n({headers:o.headers,body:{err:i||"Union failed."}});var r=r||{};r.graph={},Gun.is.graph(e.body,function(e,n){r.graph[n]=t.__.graph[n]}),t.__.opt.wire.put(r.graph,function(e,t){return e?n({headers:o.headers,body:{err:e||"Failed."}}):void n({headers:o.headers,body:{ok:t||"Persisted."}})},{local:!0,peers:{}})}).err)&&n({headers:o.headers,body:{err:e.err||"Union failed."}})):n({headers:o.headers,body:{err:"No body"}})},Gun.obj.map(t.__.opt.peers,function(){return i.server.able=i.server.able||i.request.createServer(i.server)||!0}),t.__.opt.wire.get=t.__.opt.wire.get||i.get,t.__.opt.wire.put=t.__.opt.wire.put||i.put,t.__.opt.wire.key=t.__.opt.wire.key||i.key});var n=function(){function e(n,t,o,i){i=i||(n.length?{base:n}:n),i.base=i.base||n,i.body=i.body||t,o=o||function(){},i.base&&e.transport(i,o)}return e.createServer=function(n){e.createServer.s.push(n)},e.createServer.ing=function(n,t){for(var o=e.createServer.s.length;o--;)(e.createServer.s[o]||function(){})(n,t)},e.createServer.s=[],e.back=2,e.backoff=2,e.transport=function(n,t){e.ws(n,t)||e.jsonp(n,t)},e.ws=function(n,t){var o,i=window.WebSocket||window.mozWebSocket||window.webkitWebSocket;if(i){if(o=e.ws.peers[n.base]){if(!o.readyState)return setTimeout(function(){e.ws(n,t)},10),!0;var r={};return n.headers&&(r.headers=n.headers),n.body&&(r.body=n.body),n.url&&(r.url=n.url),r.headers=r.headers||{},e.ws.cbs[r.headers["ws-rid"]="WS"+ +new Date+"."+Math.floor(65535*Math.random()+1)]=function(n,o){(o.body||o.end)&&delete e.ws.cbs[r.headers["ws-rid"]],t(n,o)},o.send(JSON.stringify(r)),!0}if(o!==!1)return o=e.ws.peers[n.base]=new i(n.base.replace("http","ws")),o.onopen=function(o){e.back=2,e.ws(n,t)},o.onclose=window.onbeforeunload=function(t){t&&(o&&o.close instanceof Function&&o.close(),1006===t.code,o=e.ws.peers[n.base]=null,setTimeout(function(){e.ws(n,function(){})},e.back*=e.backoff))},o.onmessage=function(t){if(t&&t.data){var o;try{o=JSON.parse(t.data)}catch(i){return}if(o)return o.headers=o.headers||{},o.headers["ws-rid"]?(e.ws.cbs[o.headers["ws-rid"]]||function(){})(null,o):void(o.body&&e.createServer.ing(o,function(t){e(n.base,null,null,t)}))}},o.onerror=function(e){Gun.log(e)},!0}},e.ws.peers={},e.ws.cbs={},e.jsonp=function(n,t){e.jsonp.ify(n,function(o){o&&e.jsonp.send(o,function(o){t(null,o),e.jsonp.poll(n,o)},n.jsonp)})},e.jsonp.send=function(e,n,t){var o=document.createElement("script");return o.src=e,window[o.id=t]=function(e){n(e),n.id=o.id,o.parentNode.removeChild(o),window[n.id]=null;try{delete window[n.id]}catch(t){}},o.async=!0,document.getElementsByTagName("head")[0].appendChild(o),o},e.jsonp.poll=function(n,t){n&&n.base&&t&&t.headers&&t.headers.poll&&((e.jsonp.poll.s=e.jsonp.poll.s||{})[n.base]=e.jsonp.poll.s[n.base]||setTimeout(function(){var t={base:n.base,headers:{pull:1}};e.each(n.headers,function(e,n){t.headers[n]=e}),e.jsonp(t,function(t,o){for(delete e.jsonp.poll.s[n.base];o.body&&o.body.length&&o.body.shift;){var i=o.body.shift();i&&i.body&&e.createServer.ing(i,function(){e(n.base,null,null,i)})}})},t.headers.poll))},e.jsonp.ify=function(n,t){var o=encodeURIComponent,i="?";if(n.url&&n.url.pathname&&(i=n.url.pathname+i),i=n.base+i,e.each((n.url||{}).query,function(e,n){i+=o(n)+"="+o(e)+"&"}),n.headers&&(i+=o("`")+"="+o(JSON.stringify(n.headers))+"&"),e.jsonp.max<i.length)return t();if(i+=o("jsonp")+"="+o(n.jsonp="P"+Math.floor(65535*Math.random()+1)),n.body){i+="&";var r=n.body,a=function(e,n,t){return o("%")+"="+o(e+"-"+(n||e)+"/"+(t||e))+"&"+o("$")+"="};"string"!=typeof r&&(r=JSON.stringify(r),i+=o("^")+"="+o("json")+"&"),r=o(r);var s=0,u=r.length,c=e.jsonp.max-(i.length+a(u.toString()).length);
if(0>c)return t();for(;r;)t(i+a(s,s+=c,u)+r.slice(0,s)),r=r.slice(s)}else t(i)},e.jsonp.max=2e3,e.each=function(e,n){if(e&&n)for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)},e}()}}({}),function(e,n,t){"object"==typeof exports?module.exports=exports=n(require("./core"),require("./x64-core"),require("./lib-typedarrays"),require("./enc-utf16"),require("./enc-base64"),require("./md5"),require("./sha1"),require("./sha256"),require("./sha224"),require("./sha512"),require("./sha384"),require("./sha3"),require("./ripemd160"),require("./hmac"),require("./pbkdf2"),require("./evpkdf"),require("./cipher-core"),require("./mode-cfb"),require("./mode-ctr"),require("./mode-ctr-gladman"),require("./mode-ofb"),require("./mode-ecb"),require("./pad-ansix923"),require("./pad-iso10126"),require("./pad-iso97971"),require("./pad-zeropadding"),require("./pad-nopadding"),require("./format-hex"),require("./aes"),require("./tripledes"),require("./rc4"),require("./rabbit"),require("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):e.CryptoJS=n(e.CryptoJS)}(this,function(e){return e}),function(e,n){"object"==typeof exports?module.exports=exports=n():"function"==typeof define&&define.amd?define([],n):e.CryptoJS=n()}(this,function(){var e=e||function(e,n){var t={},o=t.lib={},i=o.Base=function(){function e(){}return{extend:function(n){e.prototype=this;var t=new e;return n&&t.mixIn(n),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),r=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],t!=n?this.sigBytes=t:this.sigBytes=4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var n=this.words,t=e.words,o=this.sigBytes,i=e.sigBytes;if(this.clamp(),o%4)for(var r=0;i>r;r++){var a=t[r>>>2]>>>24-r%4*8&255;n[o+r>>>2]|=a<<24-(o+r)%4*8}else for(var r=0;i>r;r+=4)n[o+r>>>2]=t[r>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t,o=[],i=function(n){var n=n,t=987654321,o=4294967295;return function(){t=36969*(65535&t)+(t>>16)&o,n=18e3*(65535&n)+(n>>16)&o;var i=(t<<16)+n&o;return i/=4294967296,i+=.5,i*(e.random()>.5?1:-1)}},a=0;n>a;a+=4){var s=i(4294967296*(t||e.random()));t=987654071*s(),o.push(4294967296*s()|0)}return new r.init(o,n)}}),a=t.enc={},s=a.Hex={stringify:function(e){for(var n=e.words,t=e.sigBytes,o=[],i=0;t>i;i++){var r=n[i>>>2]>>>24-i%4*8&255;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},parse:function(e){for(var n=e.length,t=[],o=0;n>o;o+=2)t[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new r.init(t,n/2)}},u=a.Latin1={stringify:function(e){for(var n=e.words,t=e.sigBytes,o=[],i=0;t>i;i++){var r=n[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var n=e.length,t=[],o=0;n>o;o++)t[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new r.init(t,n)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(n){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,o=t.words,i=t.sigBytes,a=this.blockSize,s=4*a,u=i/s;u=n?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*a,l=e.min(4*c,i);if(c){for(var f=0;c>f;f+=a)this._doProcessBlock(o,f);var d=o.splice(0,c);t.sigBytes-=l}return new r.init(d,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(o.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var n=this._doFinalize();return n},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new f.HMAC.init(e,t).finalize(n)}}}),t.algo={});return t}(Math);return e}),function(e,n){"object"==typeof exports?module.exports=exports=n(require("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(e.CryptoJS)}(this,function(e){return function(n){var t=e,o=t.lib,i=o.WordArray,r=o.Hasher,a=t.algo,s=[],u=[];!function(){function e(e){for(var t=n.sqrt(e),o=2;t>=o;o++)if(!(e%o))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var o=2,i=0;64>i;)e(o)&&(8>i&&(s[i]=t(n.pow(o,.5))),u[i]=t(n.pow(o,1/3)),i++),o++}();var c=[],l=a.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,o=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],f=t[6],d=t[7],h=0;64>h;h++){if(16>h)c[h]=0|e[n+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=c[h-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[h]=g+c[h-7]+m+c[h-16]}var b=s&l^~s&f,y=o&i^o&r^i&r,_=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),w=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),j=d+w+b+u[h]+c[h],x=_+y;d=f,f=l,l=s,s=a+j|0,a=r,r=i,i=o,o=j+x|0}t[0]=t[0]+o|0,t[1]=t[1]+i|0,t[2]=t[2]+r|0,t[3]=t[3]+a|0,t[4]=t[4]+s|0,t[5]=t[5]+l|0,t[6]=t[6]+f|0,t[7]=t[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=n.floor(o/4294967296),t[(i+64>>>9<<4)+15]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(l),t.HmacSHA256=r._createHmacHelper(l)}(Math),e.SHA256}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,n){function t(e){function n(e){o?(t(),J(n),i=!0,o=!1):i=!1}var t=e,o=!1,i=!1;this.kick=function(e){o=!0,i||n()},this.end=function(e){var n=t;e&&(i?(t=o?function(){n(),e()}:e,o=!0):e())}}function o(){return!0}function i(){return!1}function r(e){e.preventDefault()}function a(e){M[e.target.tagName.toLowerCase()]||e.preventDefault()}function s(e){return 1===e.which&&!e.ctrlKey&&!e.altKey}function u(e,n){var t,o;if(e.identifiedTouch)return e.identifiedTouch(n);for(t=-1,o=e.length;++t<o;)if(e[t].identifier===n)return e[t]}function c(e,n){var t=u(e.changedTouches,n.identifier);if(t&&(t.pageX!==n.pageX||t.pageY!==n.pageY))return t}function l(e){var n;s(e)&&(n={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp},H(document,z.move,f,n),H(document,z.cancel,d,n))}function f(e){var n=e.data;b(e,n,e,h)}function d(e){h()}function h(){I(document,z.move,f),I(document,z.cancel,d)}function p(e){var n,t;M[e.target.tagName.toLowerCase()]||(n=e.changedTouches[0],t={target:n.target,startX:n.pageX,startY:n.pageY,timeStamp:e.timeStamp,identifier:n.identifier},H(document,D.move+"."+n.identifier,g,t),H(document,D.cancel+"."+n.identifier,v,t))}function g(e){var n=e.data,t=c(e,n);t&&b(e,n,t,m)}function v(e){var n=e.data,t=u(e.changedTouches,n.identifier);t&&m(n.identifier)}function m(e){I(document,"."+e,g),I(document,"."+e,v)}function b(e,n,t,o){var i=t.pageX-n.startX,r=t.pageY-n.startY;B*B>i*i+r*r||w(e,n,t,i,r,o)}function y(){return this._handled=o,!1}function _(e){e._handled()}function w(e,n,t,o,i,r){var a,s;n.target;a=e.targetTouches,s=e.timeStamp-n.timeStamp,n.type="movestart",n.distX=o,n.distY=i,n.deltaX=o,n.deltaY=i,n.pageX=t.pageX,n.pageY=t.pageY,n.velocityX=o/s,n.velocityY=i/s,n.targetTouches=a,n.finger=a?a.length:1,n._handled=y,n._preventTouchmoveDefault=function(){e.preventDefault()},C(n.target,n),r(n.identifier)}function j(e){var n=e.data.timer;e.data.touch=e,e.data.timeStamp=e.timeStamp,n.kick()}function x(e){var n=e.data.event,t=e.data.timer;k(),T(n,t,function(){setTimeout(function(){I(n.target,"click",i)},0)})}function k(e){I(document,z.move,j),I(document,z.end,x)}function S(e){var n=e.data.event,t=e.data.timer,o=c(e,n);o&&(e.preventDefault(),n.targetTouches=e.targetTouches,e.data.touch=o,e.data.timeStamp=e.timeStamp,t.kick())}function q(e){var n=e.data.event,t=e.data.timer,o=u(e.changedTouches,n.identifier);o&&(Y(n),T(n,t))}function Y(e){I(document,"."+e.identifier,S),I(document,"."+e.identifier,q)}function X(e,n,t,o){var i=t-e.timeStamp;e.type="move",e.distX=n.pageX-e.startX,e.distY=n.pageY-e.startY,e.deltaX=n.pageX-e.pageX,e.deltaY=n.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/i,e.velocityY=.3*e.velocityY+.7*e.deltaY/i,e.pageX=n.pageX,e.pageY=n.pageY}function T(e,n,t){n.end(function(){return e.type="moveend",C(e.target,e),t&&t()})}function O(e,n,t){return H(this,"movestart.move",_),!0}function G(e){return I(this,"dragstart drag",r),I(this,"mousedown touchstart",a),I(this,"movestart",_),!0}function N(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(H(this,"dragstart."+e.guid+" drag."+e.guid,r,n,e.selector),H(this,"mousedown."+e.guid,a,n,e.selector))}function A(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(I(this,"dragstart."+e.guid+" drag."+e.guid),I(this,"mousedown."+e.guid))}var B=6,H=e.event.add,I=e.event.remove,C=function(n,t,o){e.event.trigger(t,o,n)},J=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,n){return window.setTimeout(function(){e()},25)}}(),M={textarea:!0,input:!0,select:!0,button:!0},z={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},D={move:"touchmove",cancel:"touchend",end:"touchend"};e.event.special.movestart={setup:O,teardown:G,add:N,remove:A,_default:function(e){function o(n){X(r,a.touch,a.timeStamp),C(e.target,r)}var r,a;e._handled()&&(r={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},a={event:r,timer:new t(o),touch:n,timeStamp:n},e.identifier===n?(H(e.target,"click",i),H(document,z.move,j,a),H(document,z.end,x,a)):(e._preventTouchmoveDefault(),H(document,D.move+"."+e.identifier,S,a),H(document,D.end+"."+e.identifier,q,a)))}},e.event.special.move={setup:function(){H(this,"movestart.move",e.noop)},teardown:function(){I(this,"movestart.move",e.noop)}},e.event.special.moveend={setup:function(){H(this,"movestart.moveend",e.noop)},teardown:function(){I(this,"movestart.moveend",e.noop)}},H(document,"mousedown.move",l),H(document,"touchstart.move",p),"function"==typeof Array.prototype.indexOf&&!function(e,n){for(var t=["changedTouches","targetTouches"],o=t.length;o--;)-1===e.event.props.indexOf(t[o])&&e.event.props.push(t[o])}(e)}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=e:e(jQuery)}(function(e,n){function t(e){var n,t,o;n=e.currentTarget.offsetWidth,t=e.currentTarget.offsetHeight,o={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger},e.distX>e.distY?e.distX>-e.distY?(e.distX/n>s.threshold||e.velocityX*e.distX/n*s.sensitivity>1)&&(o.type="swiperight",a(e.currentTarget,o)):(-e.distY/t>s.threshold||e.velocityY*e.distY/n*s.sensitivity>1)&&(o.type="swipeup",a(e.currentTarget,o)):e.distX>-e.distY?(e.distY/t>s.threshold||e.velocityY*e.distY/n*s.sensitivity>1)&&(o.type="swipedown",a(e.currentTarget,o)):(-e.distX/n>s.threshold||e.velocityX*e.distX/n*s.sensitivity>1)&&(o.type="swipeleft",a(e.currentTarget,o))}function o(n){var t=e.data(n,"event_swipe");return t||(t={count:0},e.data(n,"event_swipe",t)),t}var i=e.event.add,r=e.event.remove,a=function(n,t,o){e.event.trigger(t,o,n)},s={threshold:.4,sensitivity:6};e.event.special.swipe=e.event.special.swipeleft=e.event.special.swiperight=e.event.special.swipeup=e.event.special.swipedown={setup:function(e,n,r){var e=o(this);if(!(e.count++>0))return i(this,"moveend",t),!0},teardown:function(){var e=o(this);if(!(--e.count>0))return r(this,"moveend",t),!0},settings:s}});